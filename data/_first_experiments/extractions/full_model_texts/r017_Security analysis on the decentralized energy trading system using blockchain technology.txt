I. INTRODUCTION
The trading of energy systems is evolving towards a more decentralized model that accommodates heterogeneous, competitive energy sources and energy storage systems (ESS). Most modern financial infrastructures are centralized and involve a trusted third party, which handles accounts, processes payments, and provides security  [1] ,  [2] . In general, the centralized trading system still has some drawbacks and becomes the death knell for energy providers. The decentralized possesses a single point of failure from a middleman that may disrupt trading activities  [3] -  [5]  as it directly affects consumer satisfaction. Hence, the research related to trading activities to improve the quality of service has been extensively developed by experts, including the trading system using blockchain technology in the energy sector. The initial step for trading renewable energy systems has been exploring, integrating, and making connections for equipment with distributed energy resource systems such as solar energy in a decentralized peer-to-peer network. As it has for centuries, commerce relies on trust and verified identity, with a cryptography protocol module embedded in the system to ensure data credibility and other security measures. Starting as a niche system on the market, nowadays, it attracts the interest of experts in several industries  [6] . The essence of the decentralized system in the energy sector (see  Fig 1)  is based on a powerful idea to organize, properly structure, and steer to improve the quality of service. It gives many advantages, such as flexibility, scalability, etc. Furthermore, a third party whose service is needed in the industries is no longer necessary in a decentralized blockchain system. Henceforth, it increases the transaction speed, reduces the cost, and improves the quality of service of a trading system. Instead of only consuming energy, the blockchain allows prosumers with surplus energy to create a trading activity to sell their energy via an intelligent grid. Several researchers have proposed a concept of decentralized energy trading through multi-signatures and the anonymous messaging stream  [7] ,  [8] . The system is built by following the Bitcoin protocol via peer-to-peer messages (anonymity transaction). There are two types of communication in the system: sending a private message and broadcasting the message. The algorithm of energy trading between the payer and payee is also given in this paper. If there is any dispute during the transaction, the Distribution System Operator (DSO) can solve the problems among the parties. The authors did not elaborate on the attacker's performance, such as selfish mining, eclipse attack, and double spending attack in the model. Imbault et al.  [9]  proposed the green blockchain concept for managing energy and exploring and creating a green certificate in an eco-district. There are no details 

45
related to the security issues in this system. Recently, Danzi et al.  [10]  showed the concept of distributed proportional fairness control via a blockchain smart contract. The study aimed to enhance efficiency, especially regarding transmission losses in the smart grid.

II. RESEARCH METHOD A. FUNDAMENTAL OF BLOCKCHAIN
The blockchain network can be described as a data structure used to create ledgers containing much transaction information  [11] -  [13] . As it has for centuries, commerce relies on trust and verified identity with cryptography protocol modules embedded in the system to ensure the credibility of the data and other security manners. As shown in Fig  2 , the timestamp is used in digital documents to prevent the attacker from tamperproofing it. The block in the blockchain is like a seal; if the attacker tries to break the seal, everyone is allowed to know the action. Each owner transfers the coin to the next by digitally signing a hash of the previous transaction and the public key of the next owner and adding these to the end of the coin  [14] ,  [15] . The hash is produced by running the contents of the block in question through a cryptographic hash function, e.g., Bitcoin uses SHA-256. An ideal cryptographic hash function can easily create a hash for any input, but it is challenging to derive the input. In blockchain architecture, a block consists of two main parts: the transaction block, which contains all the transactions within the block, and the block header. The block header is a short and strictly formatted data field that prepends every block. It includes six fields, each serving a different function. Table  1  provides a detailed description of the functionalities of these fields. In various sectors, blockchain is being used to build some purposes such as financial registries  [16]  and operational registries  [17] ,  [18]  , and one of the most popular ones is the smart contracts  [19] ,  [20] : a. Financial registries: Cryptocurrencies such as Litecoin, Bitcoin, and Dogecoin can be alternatives to real currencies in the blockchain system. b. Operational registries: Blockchain allows the tracking and certifying of specific products or assets, including renting contracts, land registers, and notary deals or votes. c. Smart contracts (automated actions on the blockchain) are account-holding objects that contain several code functions to make decisions, store data, and send cryptocurrencies to the next owner. The smart contract can execute the code (self-executing). Proof-of-work in Bitcoin, proof-of-stake, and so on are various consensus protocols that keep the blockchain secure  [21] . It depends on the consensus protocol. The blocks are created and added to the blockchain differently. In proof of work, blocks are made by mining, which keeps the blockchain safe. A probability of finding nNonce of proof H for given target T is: ùëÉ(ùêª ‚â§ ùëá) = ùëá 2 256 (1) The disadvantage of proof-work is related to efficiency, which wastes too many computational resources to find the target value (hash puzzle). The hash in PoW begins with several zero-bit hashes (SHA-256) and involves scanning for value when hashing data.

B. RESILIENT OVERLAY NETWORK
An extensive distributed system is an overlay network that delivers content, applications, and services to a global audience  [22] . The chord algorithm in the overlay network provides a fast-distributed computation of hash function mapping keys to nodes responsible for them. It uses consistent hashing  [23] , which has several good properties. With high probability, when a ùëõ ùë°‚Ñé node joins (or leaves) the network, only an O(1/N) fraction of the keys are moved to a different location. This is the minimum necessary to maintain a balanced load  [24] . Fig.  3  shows a possible three-layered software structure for a cooperative mirror system. The highest layer would provide an interface to users, including naming.  From the client's side, there is a block, such as a file system, block store, and the chord itself. Block stores and chords are connected to another server and the client from the server. The primary usage of the chord protocol is a query value  [21]  from a client to find a successor (k). This refers to an O(N) query time, and the N refers to the number of rings applied. As shown in Fig 4 ., each node has a successor and a predecessor. The successor to a node is the next node in the identifier circle in a clockwise direction. The predecessor is counter-clockwise. However, typically, there are "holes" in the sequence (because of failure or departure). Regarding the possibility of the holes, each node records an arc of 2ùëü + 1 nodes in the middle of which it stands, i.e., the list of ùëü nodes preceding it and ùëü nodes following it. This list results in a high probability that a node can correctly locate its successor or predecessor, even if the network suffers from a high failure rate  [21] . In our system model, the chord-based distributed system is used to know the node location among the neighbors in the decentralized trading system.

III. RESULT AND DISCUSSION A. DECENTRALIZED ENERGY TRADING MODEL
A prominent example of a blockchain trading energy system is the Brooklyn microgrid  [24]  as shown in Figure  5 , designed in the USA. It can be described as a solution that combines the security and transparency between the neighbors offered by the blockchain concept. The system aims to measure the ability of blockchain technology to buy and sell energy among the neighbors and how effective blockchain technology is adopted.  Decentralized storage of the transaction on the blockchain system allows for keeping a distributed, transparent, and secure record of energy transactions between the parties, which is tamper-proof from the attacker. A decentralized energy trading system would no longer require third-party involvement, e.g., banks and energy companies, to do energy trading activities among the traders. Instead, the process will run automatically, and the energy will be sent after the miner solves the proof-ofwork and propagates to the entire network, which, in the end, the prosumer will get his/her reward. The router transmits the packet data of record transactions from a source to another computer in the peer-to-peer network. The wireless routers use WPA-PSK and PSK Pass Phrases to connect with other devices, and every message is encrypted using AES (Advanced Encryption Standard). The prosumer who has surplus energy and wants to sell the energy announces to the network by giving details on the amount of energy and the price. The consumers will be able to see that announcement, and if they want to do the transaction, it will be executed by the miners via a smart contract. After a transaction is broadcast to the Bitcoin network. When that happens, it is said that the transaction has been mined at a depth of 1 block. With each subsequent block found, the number of blocks deep increases by one. To be secure against double-spending, a transaction should not be considered as confirmed until it is several blocks deep. The cumulative distribution function (CDF) of blocks based on Fig  6  shows that approximately 30% of Bitcoin blocks take between 10 and 40 minutes to be generated  [26] . In a selfish mining attack, an attacker tries to find a new block by solving a proof-of-work puzzle, keeping the block secret, and mining continuously till it reaches the longest chain on the blockchain network. The selfish chain publishes its secret block if only the honest network comes close to its secret network or when the selfish chain wants to claim unfair rewards. It will affect the rational miner to ISSN 2527-9165 (Online) Security Analysis on the Decentralized Energy Trading System Using Blockchain Technology (Sandi Rahmadika, Diena Rauda Ramdania, Maisevli Harika) 47 join the selfish mining pool. The rational miners prefer to enter the pool with the highest revenue. The selfish miner relies on power mining (resources), as shown in Fig  7 , and always competes with the honest miner to find a new block. Once their network becomes the longest, the selfish miner will quickly invalidate the valid block from the honest miner. The current assumption of the Bitcoin system is safe as long as 51% of the mining power is under the honest miner, but Eyal and Sirer  [21]  show the attacker can gain unfair revenue with 25% hashing power. The components model in the network architecture performs a key role in supporting the continuity of a system, and it has the input and output gateway of the data blocks. In charge of distributing and replicating the data record of a transaction in the peer-to-peer network, the component requires knowledge of data block location and the ability to fetch data blocks in the appropriate node containing the requested data and return it to the requester. III. CONCLUSION Blockchain technology is used to trade renewable energy systems in an environment among neighbors in the peer-to-peer network. We discussed a model for trading energy in a small environment using blockchain technology and then analyzed possible security issues. The performance of the attacker is also presented. Blockchain technology with cryptographic embedded to support the security issues is a potential solution to create a secure trading renewable energy system in the environment among the neighbors. The energy and commodity transaction life cycle, even for simple transactions, involves a multitude of processes within each company and across market participants. Blockchain turns currencies and commodities into a digital form without relying on middlemen, allowing one person to trade with another. In the future, a strategy is needed to prevent various attacks, especially in the overlay network.